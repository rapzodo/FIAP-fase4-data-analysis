analyze_facial_detection:
  description: |
    Analyze the video at '{video_path}' for faces and emotions using facial_detection tool with sample_rate={frame_sample_rate}.
    
    If tool fails, report the error and stop. Only provide results based on actual tool output.

  expected_output: "Complete facial and emotion detection analysis with statistics"
  agent: facial_emotions_analyzer
  output_pydantic: FacialAnalysisOutput
  output_file: "facial_analysis_output.md"
  max_retries: 3

detect_activities:
  description: |
    Analyze the video at '{video_path}' for human activities, poses and gestures.
    Use activity_detection tool with: video_path='{video_path}', media_pipe_model='FULL', sample_rate={frame_sample_rate}
    
    If tool fails, report the error and stop. Only provide results based on actual tool output.

  expected_output: "Complete activity detection analysis with poses, gestures and timelines"
  agent: activity_detector
  output_pydantic: ActivityAnalysisOutput
  output_file: "activity_analysis_output.md"
  max_retries: 3

generate_summary:
  description: |
    Create a comprehensive summary report based on data analysis aggregated.
    
    include these sections:
    
    ##Executive summary
    - Overview in 3-4 sentences
    - key findings
    
    #Processing statistics
    - frames analyzed
    - success rates
    - processing efficiency
    
    #Facial recognition results
    - Detection rate
    - Emotion distribution with percentages
    - Confidence metrics
    
    #Activity detection results
    - Activity breakdown with percentages
    - Movements patterns
    - Poses breakdown with percentages
    - Hand gestures analysis
    
    #Anomaly Report
    - Total anomalies
    - Types and frequencies
    - Impact assessment
    
    #key insights
    - top 5 expressions
    - top 5 activities (based on frequency)
    - Patterns and correlations
    - Notable observations
  
    Format in clean markdown with clear headings and bullet points
  expected_output: "Comprehensive markdown summary report with all sections"
  agent: summarizer
  output_file: "summary-report.md"
  context:
    - analyze_facial_detection
    - detect_activities

translate_report:
  description: |
    Translate the summary report to {language}
  expected_output: "A precise 1:1 translated report"
  agent: translator
  output_file: "'{language}'-summary-report.md"
  context:
    - generate_summary